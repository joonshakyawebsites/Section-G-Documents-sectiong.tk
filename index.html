<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Metadatas -->
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, viewport-fit=cover">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Section G SXC-2019/2021</title>
    <meta property="og:type" content="profile" />
    <meta property="og:image" content="https://www.sectiong.tk/logo.png" />
    <meta property="og:image:type" content="image/png" />
    <meta property="og:title" content="Section G SXC-2019/2021" />
    <meta property="og:description" content="Class Documents on the go" />
    <meta property="og:url" content="https://www.sectiong.tk/" />
    <meta property="fb:app_id" content="1265498347173300" />
    
    <meta name="theme-color" content="#6671c6">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="mobile-web-app-title" content="Section G" />
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="msapplication-TileColor" content="#fff">
    <meta name="msapplication-TileImage" content="/assets/favicon/mstile-150x150.png">

    <meta name="msapplication-config" content="/assets/favicon/browserconfig.xml">
    <link rel="manifest" href="./manifest.json">

    <link rel="shortcut icon" href="/assets/favicon/favicon.ico">
    <link rel="mask-icon" href="/assets/favicon/safari-pinned-tab.svg" color="#6671c6">
    <link rel="icon" type="image/png" sizes="512x512" href="/assets/favicon/android-chrome-512x512.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/assets/favicon/android-chrome-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon/favicon-16x16.png">

    <link rel="apple-touch-icon" href="/assets/favicon/apple-touch-icon.png" />

    <link href="/assets/splashscreens/iphone5_splash.png" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" rel="apple-touch-startup-image" />
    <link href="/assets/splashscreens/iphone6_splash.png" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" rel="apple-touch-startup-image" />
    <link href="/assets/splashscreens/iphoneplus_splash.png" media="(device-width: 621px) and (device-height: 1104px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" rel="apple-touch-startup-image" />
    <link href="/assets/splashscreens/iphonex_splash.png" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" rel="apple-touch-startup-image" />
    <link href="/assets/splashscreens/iphonexr_splash.png" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2 and (orientation: portrait))" rel="apple-touch-startup-image" />
    <link href="/assets/splashscreens/iphonexsmax_splash.png" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" rel="apple-touch-startup-image" />
    <link href="/assets/splashscreens/ipad_splash.png" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" rel="apple-touch-startup-image" />
    <link href="/assets/splashscreens/ipadpro1_splash.png" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" rel="apple-touch-startup-image" />
    <link href="/assets/splashscreens/ipadpro3_splash.png" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" rel="apple-touch-startup-image" />
    <link href="/assets/splashscreens/ipadpro2_splash.png" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" rel="apple-touch-startup-image" />

    <link href="/assets/splashscreens/iphone5_splash_l.png" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" rel="apple-touch-startup-image" />
    <link href="/assets/splashscreens/iphone6_splash_l.png" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" rel="apple-touch-startup-image" />
    <link href="/assets/splashscreens/iphoneplus_splash_l.png" media="(device-width: 621px) and (device-height: 1104px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" rel="apple-touch-startup-image" />
    <link href="/assets/splashscreens/iphonex_splash_l.png" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" rel="apple-touch-startup-image" />
    <link href="/assets/splashscreens/iphonexr_splash_l.png" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2 and (orientation: landscape)" rel="apple-touch-startup-image" />
    <link href="/assets/splashscreens/iphonexsmax_splash_l.png" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" rel="apple-touch-startup-image" />
    <link href="/assets/splashscreens/ipad_splash_l.png" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" rel="apple-touch-startup-image" />
    <link href="/assets/splashscreens/ipadpro1_splash_l.png" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" rel="apple-touch-startup-image" />
    <link href="/assets/splashscreens/ipadpro3_splash_l.png" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" rel="apple-touch-startup-image" />
    <link href="/assets/splashscreens/ipadpro2_splash_l.png" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" rel="apple-touch-startup-image" />

    <!-- Imports -->

    <!-- Materialize CSS -->
    <link rel="stylesheet" href="./assets/css/materialize.min-1.0.0.css">

    <!-- jQuery -->
    <script type="text/javascript" src="./assets/js/jquery-3.5.0.min.js"></script>

    <!-- Materialize JS -->
    <script type="text/javascript" src="./assets/js/materialize.min-1.0.0.js"></script>

    <!-- Custom CSS Again -->
    <link class="custom-css" type="text/css" rel="stylesheet" href="./assets/css/styles.css?re=24">

    <!-- Fonts -->
    <!-- Material Icons -->
    <link rel="stylesheet" href="./assets/fonts/Google Material Icons/set-font-family.css">
    <!-- Product Sans -->
    <link rel="stylesheet" href="./assets/fonts/Product Sans/set-font-family.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.css"
    integrity="sha256-46qynGAkLSFpVbEBog43gvNhfrOj+BmwXdxFgVK/Kvc=" crossorigin="anonymous" />
</head>

<body onbeforeunload="if (typeof closeThis === 'function') { return closeThis() }">
    <!-- Custom Dark Mode JS -->
    <script type="text/javascript" src="./assets/js/custom-dark-mode.js"></script>
    <div id="page-container">
        <div id="content-wrap">
            <!-- Navigation -->
            <div class="navbar-fixed">
                <nav>
                    <div class="nav-wrapper">
                        <div class="container">
                            <a href="/" class="brand-logo center">Section<span
                                    style="color: transparent;">i</span>G</a>
                        </div>
                    </div>
                </nav>
            </div>
            <!-- Navigation ends -->

            <!-- Back to top -->
            <div id="top" class="scrollspy"></div>
            <div id="flash" class="popup section" style="margin-bottom: -2em;">
                <div class="container pWrapper">
                    <div class="row">
                        <div class="col s12 m8 offset-m2">
                            <div class="card hoverable">
                                <div class="card-content flow-text">
                                    <i class="close material-icons right" onclick="closeThis()" style="cursor: pointer;">close</i>
                                    <p id="install-message">
                                        You can install this app for easy access.
                                        <button id="install" class="btn deep-purple lighten-1" style="margin: .5em auto auto auto; display: block;">Install Section G</button>                        
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="contents">
                <div class="middle flow-text">
                    <div class="cardhold">
                        <div class="preloader-wrapper small active">
                            <div class="spinner-layer spinner-blue">
                                <div class="circle-clipper left">
                                    <div class="circle"></div>
                                </div>
                                <div class="gap-patch">
                                    <div class="circle"></div>
                                </div>
                                <div class="circle-clipper right">
                                    <div class="circle"></div>
                                </div>
                            </div>
                      
                            <div class="spinner-layer spinner-red">
                                <div class="circle-clipper left">
                                    <div class="circle"></div>
                                </div>
                                <div class="gap-patch">
                                    <div class="circle"></div>
                                </div>
                                <div class="circle-clipper right">
                                    <div class="circle"></div>
                                </div>
                            </div>
                      
                            <div class="spinner-layer spinner-yellow">
                                <div class="circle-clipper left">
                                    <div class="circle"></div>
                                </div>
                                <div class="gap-patch">
                                    <div class="circle"></div>
                                </div>
                                <div class="circle-clipper right">
                                    <div class="circle"></div>
                                </div>
                            </div>

                            <div class="spinner-layer spinner-green">
                                <div class="circle-clipper left">
                                    <div class="circle"></div>
                                </div>
                                <div class="gap-patch">
                                    <div class="circle"></div>
                                </div>
                                <div class="circle-clipper right">
                                    <div class="circle"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Footer -->
        <footer class="page-footer">
            <!-- <div class="container">
                <div class="row">
                    <div class="col l6 s12">
                        <h5 class="white-text">Heading</h5>
                        <p class="grey-text text-lighten-4">Description</p>
                    </div>
                </div>
            </div> -->
            <div class="footer-copyright">
                <div class="container footer-flex">
                    <a href="./index.html"><u>Copyright &copy; Section G</u></a>
                    <p>V0.8.1</p>
                </div>
            </div>
        </footer>
    </div>
    
    <script>
        // Install PWA Prompt
        // variable store event
        window.deferredPrompt = {};

        // get button with id
        const install_button = document.querySelector('#install');
        const install_message = document.querySelector('#flash')

        // if the app can be installed emit beforeinstallprompt
        window.addEventListener('beforeinstallprompt', e => {
            // this event does not fire if the application is already installed
            // then your button still hidden ;)

            // show button with display:block;
            install_message.style.display = 'block';
            ready();

            // prevent default event
            e.preventDefault();

            // store install avaliable event
            window.deferredPrompt = e;

            // wait for click install button by user
            install_button.addEventListener('click', e => {
                window.deferredPrompt.prompt();
                window.deferredPrompt.userChoice.then(choiceResult => {
                if (choiceResult.outcome === 'accepted') {
                    // user accept the prompt

                    // lets hidden button
                    install_message.style.display = 'none';
                    closeThis();
                } else {
                    console.log('User dismissed the prompt');
                }
                window.deferredPrompt = null;
                });
            });
        });

        // if are standalone android OR safari
        if (window.matchMedia('(display-mode: standalone)').matches || window.navigator.standalone === true) {
            // hidden the button
            install_message.style.display = 'none';
            closeThis();
        }

        // Close button
        var growDiv = document.getElementById('flash');
        var wrapper = document.querySelector('.pWrapper');

        function ready() {
            if(growDiv) {
                growDiv.style.height = (wrapper.clientHeight + 32) + "px";
                growDiv.style.transform = "translateY(0)";
            }
        }

        function closeThis() {
            if(growDiv) {
                growDiv.style.height = "2em";
                growDiv.style.transform = "translateY(-50vh)";
            }
        }

        // do action when finished install
        window.addEventListener('appinstalled', e => {
            location.reload();
            return false;
        });

        let contactName = "";
        let contactText = "";

        function replace(response) {
            $('#contents').fadeOut("fast", function() {
                $('#contents').html(response['html']);
                $('#contents').fadeIn("fast");
                $('#name').val(contactName);
                $('#textarea').val(contactText);
            });
        }

        function check() {
            $.ajax({
                // url: 'http://127.0.0.1:8000?pass=' + localStorage.getItem('password'),
                // url: 'http://192.168.16.106:8000?pass=' + localStorage.getItem('password'),
                url: "https://joonshakyaa1.pythonanywhere.com?pass=" + localStorage.getItem('password'),
                dataType: 'json',
                success: function(response){
                    replace(response);
                },
                error: function(rs, e) {
                    $.ajax({
                        url: "https://sectiong.herokuapp.com/?pass=" + localStorage.getItem('password'),
                        dataType: 'json',
                        success: function(response){
                            replace(response);
                        },
                        error: function(rs, e) {
                            $('#contents').fadeOut("fast", function() {
                                $('#contents').html(`<div class="middle flow-text failed-to-load" style="padding-top: 1.75rem;">Failed to load data</div>`)
                                $('#contents').fadeIn("fast");
                            });
                        }
                    })
                }
            })
        }
        
        check();

        // Finish loading the document
        document.addEventListener('DOMContentLoaded', function () {
            
            // Initialize Scrollspy
            const scrollSpy = document.querySelectorAll('.scrollspy');
            M.ScrollSpy.init(scrollSpy, {
                scrollOffset: 64
            });
            
        }); // Load document ends
        
        window.addEventListener('load', e => {
            $("body").removeClass("preload");
            registerSW();
            function registerSW() { 
                if ('serviceWorker' in navigator) { 
                    try {
                        navigator.serviceWorker.register("sw.js"); 
                    } catch (e) {
                        alert('ServiceWorker registration failed. Sorry about that.'); 
                    }
                }
            }
        });
    </script>

</body>

</html>